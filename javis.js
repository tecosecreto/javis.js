(function(){if(window.javisActive){alert('JÃ¡vis jÃ¡ estÃ¡ ativo!');return;}window.javisActive=true;const s="#javis-widget-bubble{position:fixed;bottom:20px;right:20px;width:70px;height:70px;background:linear-gradient(135deg,#9333ea 0%,#7c3aed 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;cursor:pointer;z-index:999999;box-shadow:0 4px 12px rgba(147,51,234,.4);user-select:none;border:none;padding:0;transition:.3s;touch-action:none;}#javis-widget-bubble:hover{transform:scale(1.1);box-shadow:0 6px 16px rgba(147,51,234,.6);}#javis-widget-bubble:active{transform:scale(.95);}#javis-widget-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999998;align-items:center;justify-content:center;}#javis-widget-modal.active{display:flex;}#javis-widget-container{background:#fff;border-radius:16px;width:90%;max-width:500px;height:80vh;max-height:600px;display:flex;flex-direction:column;box-shadow:0 10px 40px rgba(0,0,0,.3);overflow:hidden;}#javis-widget-header{background:linear-gradient(135deg,#9333ea,#7c3aed);color:#fff;padding:16px;display:flex;justify-content:space-between;align-items:center;font-weight:bold;font-size:16px;}#javis-widget-close{background:rgba(255,255,255,.2);border:none;color:#fff;font-size:24px;cursor:pointer;padding:4px 8px;border-radius:4px;}#javis-widget-close:hover{background:rgba(255,255,255,.3);}#javis-widget-messages{flex:1;overflow-y:auto;padding:12px;background:#f8fafc;}.javis-message{margin:8px 0;display:flex;animation:javisSlideIn .3s;}@keyframes javisSlideIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}.javis-message.user{justify-content:flex-end;}.javis-message.assistant{justify-content:flex-start;}.javis-message-bubble{max-width:80%;padding:10px 14px;border-radius:12px;font-size:14px;line-height:1.4;word-wrap:break-word;}.javis-message.user .javis-message-bubble{background:#9333ea;color:#fff;}.javis-message.assistant .javis-message-bubble{background:#e2e8f0;color:#1e293b;cursor:pointer;}.javis-message.assistant .javis-message-bubble:hover{background:#cbd5e1;}#javis-widget-input-container{padding:12px;border-top:1px solid #e2e8f0;display:flex;gap:8px;background:#fff;}#javis-widget-input{flex:1;border:1px solid #e2e8f0;border-radius:8px;padding:10px;font-size:14px;resize:none;max-height:80px;}#javis-widget-input:focus{outline:none;border-color:#9333ea;box-shadow:0 0 0 3px rgba(147,51,234,.1);}#javis-widget-send{background:#9333ea;color:#fff;border:none;border-radius:8px;padding:10px 16px;cursor:pointer;font-weight:bold;}#javis-widget-send:hover{background:#7c3aed;}#javis-widget-send:disabled{background:#cbd5e1;cursor:not-allowed;}.javis-loading{display:flex;align-items:center;gap:8px;color:#64748b;font-size:14px;}.javis-spinner{display:inline-block;width:12px;height:12px;border:2px solid #9333ea;border-top-color:transparent;border-radius:50%;animation:javisSpin .6s linear infinite;}@keyframes javisSpin{to{transform:rotate(360deg);}}";const st=document.createElement("style");st.textContent=s;document.head.appendChild(st);const html='<div id="javis-widget-bubble">ðŸ’¬</div><div id="javis-widget-modal"><div id="javis-widget-container"><div id="javis-widget-header"><span>JÃ¡vis</span><button id="javis-widget-close">âœ•</button></div><div id="javis-widget-messages"></div><div id="javis-widget-input-container"><textarea id="javis-widget-input" placeholder="Sua pergunta..."></textarea><button id="javis-widget-send">âž¤</button></div></div></div>';const c=document.createElement("div");c.innerHTML=html;document.body.appendChild(c);const b=document.getElementById("javis-widget-bubble"),m=document.getElementById("javis-widget-modal"),x=document.getElementById("javis-widget-close"),md=document.getElementById("javis-widget-messages"),inp=document.getElementById("javis-widget-input"),snd=document.getElementById("javis-widget-send");let msgs=[];let drag=false,ox=0,oy=0;b.addEventListener("click",()=>{m.classList.add("active");inp.focus();});x.addEventListener("click",()=>m.classList.remove("active"));async function send(){const t=inp.value.trim();if(!t)return;msgs.push({role:"user",content:t});render();inp.value="";snd.disabled=true;const load=document.createElement("div");load.className="javis-message assistant";load.innerHTML='<div class="javis-message-bubble javis-loading"><span class="javis-spinner"></span> Pensando...</div>';md.appendChild(load);md.scrollTop=md.scrollHeight;try{const r=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyDGjJgKqNmLFDfVYGFLvMgfDfMKqKqNmLF",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}],systemInstruction:{parts:[{text:"VocÃª Ã© JÃ¡vis, um assistente de IA brasileiro."}]}})});const d=await r.json();const ai=d?.candidates?.[0]?.content?.parts?.[0]?.text||"Erro";msgs.push({role:"assistant",content:ai});load.remove();render();}catch(e){msgs.push({role:"assistant",content:"Erro ao conectar."});load.remove();render();}snd.disabled=false;}function render(){md.innerHTML="";msgs.forEach(ms=>{const div=document.createElement("div");div.className="javis-message "+ms.role;const b=document.createElement("div");b.className="javis-message-bubble";b.textContent=ms.content;if(ms.role==="assistant"){b.onclick=()=>navigator.clipboard.writeText(ms.content)};div.appendChild(b);md.appendChild(div);});md.scrollTop=md.scrollHeight;}function add(r,t){msgs.push({role:r,content:t});render();}add("assistant","OlÃ¡! Sou JÃ¡vis. Como posso ajudar?");})();
